---
title: "Ants_Infomap"
output: html_document
---

```{r setup}
# Install (if not installed) and load necessary packages
package.list=c("attempt", "cowplot", "igraph", "ggalluvial", "magrittr", "metafolio", "tidyverse", "vegan", "devtools")

loaded <- package.list %in% .packages()
package.list <- package.list[!loaded]
installed <- package.list %in% .packages(TRUE)
if(!all(installed)) install.packages(package.list[!installed], repose="http://cran.rstudio.com/")

#Install Infomapecology
devtools::install_github('Ecological-Complexity-Lab/infomap_ecology_package', force=T)
library(infomapecology)

# Check the version. Should be at least 0.1.1.1
packageDescription('infomapecology')

# Install infomap if you have not done so externally (see previous section in this readme)
setwd('/home/sshatzkin/Networks in Biology')
install_infomap()

# Check Infomap is running
setwd('/home/sshatzkin/Networks in Biology')
check_infomap() #Make sure file can be run correctly. Should return True
```

```{r}
library(igraph)
library(bipartite)
library(tidyverse)
library(magrittr)
library(infomapecology)
library(readxl)
library(ggalluvial)
```

# 1. Infomap Analysis
### Setup
```{r}
numFiles <- 41

# Create the file names
file_names <- sprintf('./ants_proximity_weighted/ant_mersch_col1_day%02d_attribute.graphml', 1:numFiles);

# Create an empty linked list
colony1_data <- vector(mode = "list", length = numFiles)

# Read in all of the files
for (i in 1:numFiles){
  colony1_data[[i]] <- read_graph(file_names[i], format = "graphml")
}

for (i in 1:3){
  plot.igraph(colony1_data[[i]]) # This plot is not particularly attractive
}
```
```{r}
# Now we need to convert this igraph data into data structures that infomap can take

```

```{r}
#data("./ants_proximity_weighted/ant_mersch_col1_day01_attribute.graphml")
#data("siberia1982_7_nodes")

layer_map <- tibble(layer_id=1:10, layer_name=1:10)
#colony_1 <- create_multilayer_object(extended = siberia1982_7_links, nodes = siberia1982_7_nodes, intra_output_extended = T, inter_output_extended = T, layers = layer_map)


#head(NEE2017$intra)
#head(NEE2017$inter)
#head(NEE2017$nodes)
#head(NEE2017$layers)
```

```{r}
#print(siberia1982_7_links)
#print(siberia1982_7_nodes)
#print(NEE2017)

```

# 2. Muxvis Analysis